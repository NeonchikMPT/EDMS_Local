EDMS - Система управления электронными документами
EDMS (Electronic Document Management System) — это Django-приложение для управления электронными документами. Оно позволяет загружать, хранить и управлять документами, а также предоставляет интерфейс для настройки пользователей, включая загрузку аватарок. Все медиа-файлы (аватарки и документы) хранятся локально в папках media/avatars/ и media/docs/.
Этот проект предназначен для локального запуска. Ниже приведена пошаговая инструкция по установке и настройке.
Требования
Перед началом убедитесь, что у вас установлены следующие инструменты:

Python 3.11.9
PostgreSQL (для базы данных)
Git (для клонирования репозитория)
pip (для установки зависимостей)
Виртуальная среда (рекомендуется, например, venv)

Установка
Следуйте этим шагам, чтобы установить и запустить EDMS на вашем компьютере.
1. Клонируйте репозиторий
Склонируйте репозиторий с GitHub и перейдите в папку проекта:
git clone https://github.com/NeonchikMPT/EDMS.git
cd EDMS

2. Создайте и активируйте виртуальную среду
Создайте виртуальную среду, чтобы изолировать зависимости проекта.
На Windows:
python -m venv .venv
.venv\Scripts\activate

На macOS/Linux:
python3 -m venv .venv
source .venv/bin/activate

3. Установите зависимости
Установите все необходимые пакеты, указанные в requirements.txt:
pip install -r requirements.txt

Список ключевых зависимостей:

django==5.2.1
psycopg2-binary==2.9.10
python-decouple==3.8
pillow==11.2.1 (для обработки изображений)

4. Настройте PostgreSQL

Убедитесь, что PostgreSQL установлен и служба запущена.

Создайте базу данных для проекта:
psql -U postgres

В командной строке PostgreSQL выполните:
CREATE DATABASE edms_db;
\q



5. Настройте файл окружения
Создайте файл .env в корне проекта (рядом с manage.py) и добавьте следующие переменные:
DB_NAME=edms_db
DB_USER=postgres
DB_PASSWORD=your_postgres_password
DB_HOST=localhost
DB_PORT=5432
SECRET_KEY=your_secure_secret_key
DJANGO_DEBUG=True


Замените your_postgres_password на ваш пароль для PostgreSQL.

Сгенерируйте безопасный SECRET_KEY с помощью команды:
python -c "import secrets; print(secrets.token_urlsafe(50))"



6. Настройка локального хранения медиа-файлов
Проект использует локальное хранилище для медиа-файлов:

Аватарки пользователей сохраняются в media/avatars/.
Документы сохраняются в media/docs/.


Создайте папки для медиа-файлов:
mkdir -p media/avatars media/docs


Убедитесь, что у папки media/ есть права на запись:
На macOS/Linux:
chmod -R 755 media

На Windows права обычно не требуют настройки, но убедитесь, что папка доступна для записи.


7. Примените миграции
Создайте и примените миграции для настройки базы данных:
python manage.py makemigrations
python manage.py migrate

8. Создайте суперпользователя
Создайте администратора для доступа к админ-панели:
python manage.py createsuperuser

Введите:

Username: например, admin
Email: например, admin@example.com
Password: например, Admin123!

9. Запустите сервер
Запустите локальный сервер разработки:
python manage.py runserver

Откройте браузер и перейдите по адресу http://localhost:8000. Админ-панель доступна по http://localhost:8000/admin.
Использование

Загрузка аватарок:
Перейдите на страницу профиля (http://localhost:8000/users/profile/).
Выберите изображение (JPG, PNG) и сохраните. Аватарка сохранится в media/avatars/.


Загрузка документов:
Перейдите на страницу загрузки документов (например, /docs/).
Выберите файл (PDF, DOCX, TXT и т.д.) и сохраните. Документ сохранится в media/docs/.


Админ-панель:
Войдите с учетными данными суперпользователя.
Управляйте пользователями, документами и другими данными.



Устранение неполадок

Ошибка подключения к базе данных:
Проверьте, что PostgreSQL запущен, и переменные DB_* в .env корректны.
Убедитесь, что база edms_db создана.


Медиа-файлы не загружаются:
Проверьте, что папки media/avatars/ и media/docs/ существуют и имеют права на запись.

Убедитесь, что в settings.py настроены:
MEDIA_URL = '/media/'
ENGINE_ROOT = BASE_DIR / 'media'


Проверьте, что формы содержат enctype="multipart/form-data".



Изображения не отображаются:
Убедитесь, что pillow установлен (pip install pillow).
Проверьте, что файлы сохраняются в media/avatars/ или media/docs/.


Ошибки миграций:
Удалите старые миграции и создайте новые:
find . -path "*/migrations/*.py" -not -name "__init__.py" -delete
python manage.py makemigrations
python manage.py migrate





Структура проекта

media/avatars/: Хранилище аватарок пользователей.
media/docs/: Хранилище документов.
users/: Приложение для управления пользователями и профилями.
docs/: Приложение для управления документами.
templates/: Шаблоны HTML для страниц.

Контакты
Если у вас есть вопросы или предложения, свяжитесь с автором: NeonchikMPT
